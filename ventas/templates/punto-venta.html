{% extends "base.html" %} 
{% block header %}
	<header class="mdl-layout__header mdl-layout__header--scroll mdl-color--deep-orange-500">	  			
    	<div class="mdl-layout--large-screen-only mdl-layout__header-row">	    		
	    	<div class=" mdl-layout-spacer"></div>
	    	<div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right mdl-textfield--full-width">
    			<form>
		            <label class="mdl-button mdl-js-button mdl-button--icon" for="search-field">
		              	<i class="material-icons">search</i>
		            </label>
		            <div class="mdl-textfield__expandable-holder">
		              	<input class="mdl-textfield__input" type="text" id="search-field">
		            </div>
	            </form>
          	</div>
		</div>
    	<div class="mdl-typography--text-center ">
    		<div class="mdl-layout-title">
    			<h1 >{{page_title}}</h1>
    		</div>

    		
    	</div>
    	<div class="mdl-layout--large-screen-only mdl-layout__header-row">
    		<!---->
    	</div>	
    	<div class="mdl-layout__tab-bar mdl-js-ripple-effect mdl-color--deep-orange-A400"> 		
    		<a href="#orden" class="mdl-layout__tab is-active">Venta</a>
    		<a href="#productos" class="mdl-layout__tab">Productos</a>
          	
    	</div>	
    </header>
{% endblock %}

{% block contedor %}	
  	<main class="mdl-layout__content mdl-color--grey-100">
  		<form action=""  method="post" role="form">{% csrf_token %}	  		
	  	<div class="mdl-grid demo-content mdl-layout__tab-panel is-active" id="orden">
	  		<div class="mdl-grid">	  		
	  			<div class="demo-cards mdl-cell mdl-cell--3-col mdl-grid mdl-grid--no-spacing">	
	  				<div class="mdl-textfield mdl-js-textfield mdl-cell--12-col">
				  		<select class="mdl-textfield__input" type="text" name="cliente" id="cliente" required>
				  			<option selected>Seleccione un cliente ...</option>
				  			{% for c in clientes %}
				  				<option value="{{c.id}}">{{c.nombre}}</option>
				  			{% endfor %}
				  		</select>      
					    <label class="mdl-textfield__label" for="cliente">Cliente</label>
				  	</div>	
				  	<div class="mdl-textfield mdl-js-textfield mdl-cell--12-col">
				  		<select class="mdl-textfield__input" type="text" name="tipo_pago" id="tipo_pago" required>
				  			<option selected>Tipo de Pago ...</option>
				  			{% for tp in tipo_pago %}
				  				<option value="{{tp.id}}">{{tp.nombre}}</option>
				  			{% endfor %}
				  		</select>      
					    <label class="mdl-textfield__label" for="tipo_pago">Tipo de Pago</label>
				  	</div>
				  	<input class="mdl-textfield__input" type="hidden" name="estatus_orden" id="estatus_orden" value="1" required/>
				  	<input class="mdl-textfield__input" type="hidden" name="estatus_cobranza" id="estatus_cobranza" value="1" required/>	
				  	<input type="hidden" name="total" value="" required="required" /></input>
		    		<input type="hidden" name="total_peso" value="" required="required" /></input>	
		  			
				</div>
				<div class="demo-cards mdl-cell mdl-cell--9-col mdl-grid mdl-grid--no-spacing">	
					<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--12-col mdl-grid ">
						<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-fullwidth">
							<thead>
								<tr>
								  <th class="mdl-data-table__cell--non-numeric">Producto</th>
								  <th>Catidad</th>
								  <th>Precio Unitario</th>
								  <th>Total</th>
								</tr>
							</thead>
							<tbody class="venta">
								
							</tbody>
						</table>
					</div>			    	
		    	</div>
	    	</div>
	  	</div>
	  	<div class="mdl-grid demo-content mdl-layout__tab-panel " id="productos">
	  		<div class="mdl-grid">	
	  		<div class="demo-cards mdl-cell mdl-cell--12-col mdl-grid mdl-grid--no-spacing">	
					<div class="mdl-color--white mdl-shadow--2dp mdl-cell mdl-cell--11-col mdl-grid ">
						<table class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-fullwidth">
							<thead>
								<tr>
								  <th class="mdl-data-table__cell--non-numeric">Producto</th>
								  <th>SKU</th>
								  <th>Existencia</th>
								</tr>
							</thead>
							<tbody>
								{% for p in productos %}
								<tr>
								  <td class="mdl-data-table__cell--non-numeric">{{p.nombre}}</td>
								  <td>{{p.sku}}</td>
								  <td>{{p.stock}}</td>								  
								</tr>								
								{% endfor %}
							</tbody>
						</table>
					</div>			    	
		    	</div>
	  		</div>
	  	</div>
	  	</form>
   	</main>
   	<footer class="mdl-mega-footer">	    
	  	<div class="mdl-mega-footer__bottom-section">
	  		<div class="mdl-mega-footer__left-section mdl-cell--8-col">
	  			<div class="mdl-textfield mdl-js-textfield ui-widget">
			  		<input class="mdl-textfield__input" type="text" id="producto_p">
    				<label class="mdl-textfield__label" for="producto">Añadir Producto...</label>
    			</div>
    			<input type="hidden" id="topicID">
    			<input type="hidden" id="precio_p">
	    		<div class="mdl-textfield mdl-js-textfield">	    			
				    <input class="mdl-textfield__input" type="text" pattern="-?[0-9]*(\.[0-9]+)?" id="cantidad_p">
				    <label class="mdl-textfield__label" for="cantidad_p">Cantidad</label>
				    <span class="mdl-textfield__error">¡No es número!</span>
			  	</div>
			  	<div class="mdl-cell--12-col mdl-textfield--align-right">				  			   		
			  		<button class="mdl-button mdl-js-button  mdl-js-ripple-effect mdl-button--primary">
					  	ENVIAR
					</button>
		    	</div>
				
			  	
	    	</div>
		    <div class="mdl-mega-footer__right-section">
		    	<div>Total: $</div>
		    	
		    </div>
	  	</div>
	</footer>
    
{% endblock %}
{% block adicional-scripts %}
<script type="text/javascript">
	var productos= [
	{% for p in productos %}
	    {
	        value: "{{p.sku}}",
	        label: "{{p.nombre}}",
	        precio: "{{p.precio_unitario}}",
	        id: "{{p.id}}"
	    },
    {% endfor %}    
];

$(document).ready(function() {
    $( "#producto_p" ).autocomplete({
        minLength: 0,
        source: productos,
        focus: function( event, ui ) {
            $( "#producto_p" ).val( ui.item.label );
            return false;
        },
        select: function( event, ui ) {
            $("#producto_p").val( ui.item.label );
            $("#topicID").val(ui.item.id);
            $("#precio_p").val(ui.item.precio);
            /*$( "#results").text($("#topicID").val());    */
            return false;
    	}
	})
	$("#add").click(function() {
		input = $("<tr><td><labelclas='mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect mdl-data-table__select mdl-js-ripple-effect--ignore-events is-upgraded' data-upgraded=',MaterialCheckbox,MaterialRipple'><input type='checkbox' class='mdl-checkbox__input'><span class='mdl-checkbox__focus-helper'></span><span class='mdl-checkbox__box-outline'><span class='mdl-checkbox__tick-outline'></span></span><span class='mdl-checkbox__ripple-container mdl-js-ripple-effect mdl-ripple--center' data-upgraded=',MaterialRipple'><span class='mdl-ripple is-animating' style='width: 103.823px; height: 103.823px; transform: translate(-50%, -50%) translate(18px, 18px);'></span></span></label></td><td class='mdl-data-table__cell--non-numeric'>"+ $("#producto_p").val() +"</td><td>" + "<input type='text' id='cantidad' class='mdl-textfield__input' name='cantidad' value=\"" + $("#cantidad_p").val() + "\"/>" + "</td><td>"+  +"</td><td>"+ $("#precio_p").val()+"</td></tr><input type=\"hidden\" id='producto' name='producto' value=\"" + $('#topicID').val() + "\"/>");
		$(".venta").append(input);
	});

});

</script>
{% endblock %}
